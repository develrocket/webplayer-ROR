(function(){var e;e=function(){function e(e,t,r,o,i,n,s){this.name=e,this.baseRequestForFilter=t,this.baseLinkForShowAllRecords=r,this.linkForExport=o,this.parameterNameForQueryLoading=i,this.parameterNameForFocus=n,this.environment=s,this.filterDeclarations=new Array,this.checkIfJsFrameworkIsLoaded()}return e.prototype.checkIfJsFrameworkIsLoaded=function(){return jQuery?void 0:alert("jQuery not loaded, WiceGrid cannot proceed!")},e.prototype.toString=function(){return"<WiceGridProcessor instance for grid '"+this.name+"'>"},e.prototype.process=function(e){return this.visit(this.buildUrlWithParams(e))},e.prototype.visit=function(e){return"undefined"!=typeof Turbolinks&&null!==Turbolinks?Turbolinks.visit(e):window.location=e},e.prototype.setProcessTimer=function(e){var t;return this.timer&&(clearTimeout(this.timer),this.timer=null),t=this,this.timer=setTimeout(function(){return t.process(e)},1e3)},e.prototype.reloadPageForGivenGridState=function(e){var t;return t=this.gridStateToRequest(e),this.visit(this.appendToUrl(this.baseLinkForShowAllRecords,t))},e.prototype.gridStateToRequest=function(e){return jQuery.map(e,function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])}).join("&")},e.prototype.appendToUrl=function(e,t){var r;return r=-1!==e.indexOf("?")?/[&\?]$/.exec(e)?"":"&":"?",e+r+t},e.prototype.buildUrlWithParams=function(e){var t,r,o;return o=new Array,jQuery.each(this.filterDeclarations,function(e){return function(t,r){var i;return i=e.readValuesAndFormQueryString(r.filterName,r.detached,r.templates,r.ids),i&&""!==i?o.push(i):void 0}}(this)),r=this.baseRequestForFilter,0!==o.length&&(t=o.join("&"),r=this.appendToUrl(r,t)),e&&(r=this.appendToUrl(r,this.parameterNameForFocus+e)),r},e.prototype.reset=function(){return this.visit(this.baseRequestForFilter)},e.prototype.exportToCsv=function(){return this.visit(this.linkForExport)},e.prototype.register=function(e){return this.filterDeclarations.push(e)},e.prototype.readValuesAndFormQueryString=function(e,t,r,o){var i,n,s,a,u,c,h,p,d,l;for(d=new Array,n=a=0,h=r.length-1;h>=0?h>=a:a>=h;n=h>=0?++a:--a){if(null===$(o[n]))return"development"===this.environment&&(c='WiceGrid: Error reading state of filter "'+e+'". No DOM element with id "'+o[n]+'" found.',t&&(c+='You have declared "'+e+'" as a detached filter but have not output it anywhere in the template. Read documentation about detached filters.'),alert(c)),"";if(i=$("#"+o[n]),i[0]&&"checkbox"===i[0].type?i[0].checked&&(l=1):l=i.val(),l instanceof Array)for(s=u=0,p=l.length-1;p>=0?p>=u:u>=p;s=p>=0?++u:--u)l[s]&&""!==l[s]&&d.push(r[n]+encodeURIComponent(l[s]));else l&&""!==l&&d.push(r[n]+encodeURIComponent(l))}return d.join("&")},e}(),e._version="3.4",window.WiceGridProcessor=e}).call(this);