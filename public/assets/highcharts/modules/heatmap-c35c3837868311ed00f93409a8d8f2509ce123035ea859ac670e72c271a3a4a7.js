!function(t){var i,s=t.Axis,o=t.Chart,e=t.Color,a=t.Legend,n=t.LegendSymbolMixin,r=t.Series,l=t.Point,h=t.getOptions(),p=t.each,c=t.extend,d=t.extendClass,u=t.merge,g=t.pick,m=t.seriesTypes,f=t.wrap,y=function(){},x=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};c(x.prototype,s.prototype),c(x.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,i){var o,e="vertical"!==t.options.legend.layout;o=u(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},i,{opposite:!e,showEmpty:!1,title:null,isColor:!0}),s.prototype.init.call(this,t,o),i.dataClasses&&this.initDataClasses(i),this.initStops(i),this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,s){var o,e;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,o=1!==i[3]||1!==t[3],e=(o?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-s))+","+Math.round(i[1]+(t[1]-i[1])*(1-s))+","+Math.round(i[2]+(t[2]-i[2])*(1-s))+(o?","+(i[3]+(t[3]-i[3])*(1-s)):"")+")"):e=i.raw||"none",e},initDataClasses:function(t){var i,s=this,o=this.chart,a=0,n=this.options,r=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],p(t.dataClasses,function(t,l){var h;t=u(t),i.push(t),t.color||("category"===n.dataClassColor?(h=o.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=s.tweenColors(e(n.minColor),e(n.maxColor),2>r?.5:l/(r-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],p(this.stops,function(t){t.color=e(t[1])})},setOptions:function(t){s.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,s,o,e=this.legendSymbol,a=this.chart;e&&(this.left=t=e.attr("x"),this.top=i=e.attr("y"),this.width=s=e.attr("width"),this.height=o=e.attr("height"),this.right=a.chartWidth-t-s,this.bottom=a.chartHeight-i-o,this.len=this.horiz?s:o,this.pos=this.horiz?t:i)},toColor:function(t,s){var o,e,a,n,r,l,h=this.stops,p=this.dataClasses;if(p){for(l=p.length;l--;)if(r=p[l],e=r.from,a=r.to,(e===i||t>=e)&&(a===i||a>=t)){n=r.color,s&&(s.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),l=h.length;l--&&!(o>h[l][0]););e=h[l]||h[l+1],a=h[l+1]||e,o=1-(a[0]-o)/(a[0]-e[0]||1),n=this.tweenColors(e.color,a.color,o)}return n},getOffset:function(){var t=this.legendGroup,i=this.chart.axisOffset[this.side];t&&(this.axisParent=t,s.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)},setLegendColor:function(){var t,i=this.horiz,s=this.options,o=this.reversed;t=i?[+o,0,+!o,0]:[0,+!o,0,+o],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:s.stops||[[0,s.minColor],[1,s.maxColor]]}},drawLegendSymbol:function(t,i){var s,o=t.padding,e=t.options,a=this.horiz,n=g(e.symbolWidth,a?200:12),r=g(e.symbolHeight,a?12:200),l=g(e.labelPadding,a?16:30),h=g(e.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,n,r).attr({zIndex:1}).add(i.legendGroup),s=i.legendSymbol.getBBox(),this.legendItemWidth=n+o+(a?h:l),this.legendItemHeight=r+o+(a?l:0)},setState:y,visible:!0,setVisible:y,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,i){var o,e=i&&i.plotX,a=i&&i.plotY,n=this.pos,r=this.len;i&&(o=this.toPixels(i[i.series.colorKey]),n>o?o=n-2:o>n+r&&(o=n+r+2),i.plotX=o,i.plotY=this.len-o,s.prototype.drawCrosshair.call(this,t,i),i.plotX=e,i.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,i,o,e,a){return"number"==typeof a?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:s.prototype.getPlotLinePath.call(this,t,i,o,e)},update:function(t,i){var o=this.chart,e=o.legend;p(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&e.allItems&&(p(e.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),o.isDirtyLegend=!0),o.options[this.coll]=u(this.userOptions,t),s.prototype.update.call(this,t,i),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var s,o=this,e=this.chart,a=this.legendItems,r=e.options.legend,l=r.valueDecimals,h=r.valueSuffix||"";return a.length||p(this.dataClasses,function(r,d){var u=!0,g=r.from,m=r.to;s="",g===i?s="< ":m===i&&(s="> "),g!==i&&(s+=t.numberFormat(g,l)+h),g!==i&&m!==i&&(s+=" - "),m!==i&&(s+=t.numberFormat(m,l)+h),a.push(c({chart:e,name:s,options:{},drawLegendSymbol:n.drawRectangle,visible:!0,setState:y,isDataClass:!0,setVisible:function(){u=this.visible=!u,p(o.series,function(t){p(t.points,function(t){t.dataClass===d&&t.setVisible(u)})}),e.legend.colorizeItem(this,u)}},r))}),a},name:""}),p(["fill","stroke"],function(t){HighchartsAdapter.addAnimSetter(t,function(i){i.elem.attr(t,x.prototype.tweenColors(e(i.start),e(i.end),i.pos))})}),f(o.prototype,"getAxes",function(t){var i=this.options,s=i.colorAxis;t.call(this),this.colorAxis=[],s&&(t=new x(this,s))}),f(a.prototype,"getAllItems",function(t){var i=[],s=this.chart.colorAxis[0];return s&&(s.options.dataClasses?i=i.concat(s.getDataClassLegendSymbols()):i.push(s),p(s.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var C={setVisible:function(t){var i=this,s=t?"show":"hide";p(["graphic","dataLabel"],function(t){i[t]&&i[t][s]()})}},v={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:y,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,s=this.colorAxis,o=this.colorKey;p(this.data,function(e){var a,n=e[o];a=e.options.color||(null===n?i:s&&void 0!==n?s.toColor(n,e):e.color||t.color),a&&(e.color=a)})}};h.plotOptions.heatmap=u(h.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),m.heatmap=d(m.scatter,u(v,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:d(l,C),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;m.scatter.prototype.init.apply(this,arguments),t=this.options,this.pointRange=t.pointRange=g(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,i=t.options,s=t.xAxis,o=t.yAxis,e=function(t,i,s){return Math.min(Math.max(i,t),s)};t.generatePoints(),p(t.points,function(t){var a=(i.colsize||1)/2,n=(i.rowsize||1)/2,r=e(Math.round(s.len-s.translate(t.x-a,0,1,0,1)),0,s.len),l=e(Math.round(s.len-s.translate(t.x+a,0,1,0,1)),0,s.len),h=e(Math.round(o.translate(t.y-n,0,1,0,1)),0,o.len),p=e(Math.round(o.translate(t.y+n,0,1,0,1)),0,o.len);t.plotX=t.clientX=(r+l)/2,t.plotY=(h+p)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(r,l),y:Math.min(h,p),width:Math.abs(l-r),height:Math.abs(p-h)}}),t.translateColors(),this.chart.hasRendered&&p(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:m.column.prototype.drawPoints,animate:y,getBox:y,drawLegendSymbol:n.drawRectangle,getExtremes:function(){r.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,r.prototype.getExtremes.call(this)}}))}(Highcharts);