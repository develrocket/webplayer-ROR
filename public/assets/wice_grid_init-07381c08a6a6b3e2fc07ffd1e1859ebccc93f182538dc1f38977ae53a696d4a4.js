(function(){var e,t,r,n,i,a,c,o,u,d,l,s,p,f,h,k,g,v,w;$(document).on("page:load ready",function(){return n()}),r="wiceGrids",n=function(){return $(".wice-grid-container").each(function(t,n){var i,a,c,u,s,p,f,k,m;for(s=n.id,i=$(".wg-data",n),m=i.data("processor-initializer-arguments"),c=i.data("filter-declarations"),e(i.data("foc")),p=new WiceGridProcessor(s,m[0],m[1],m[2],m[3],m[4],m[5]),u=function(e){return null!=e?p.register({filterName:e.filterName,detached:e.detached,templates:e.declaration.templates,ids:e.declaration.ids}):void 0},f=0,k=c.length;k>f;f++)a=c[f],u(a);return window[r]||(window[r]={}),window[r][s]=p,w(n,p),l(n,p),h(n),v(n,p),g(n),o(n,p),d(n)}),c(),f(),p(),s(),g($(".wg-detached-filter"))},a=function(e,t,r,n,i){var a,c,o,u;return(c=t.data(e))&&(u=$(a="#"+c))&&(o=u.datepicker("getDate"))&&i(o,r)?(u.datepicker("setDate",r),u.next().next().html($.datepicker.formatDate(n,r))):void 0},s=function(){return 0!==$(".date-filter.wg-jquery-datepicker").length&&k(),0!==$(".date-filter.wg-bootstrap-datepicker").length?u():void 0},u=function(){return $.fn.datepicker?$(".date-filter.wg-bootstrap-datepicker input:text[data-provide=datepicker]").each(function(e,t){return $(t).datepicker().on("hide",function(e){var t,r,n;return t=$(e.currentTarget),n=t.data("close-calendar-event-name"),n?t.trigger(n):"fr"===t.attr("id").split("_").pop()&&(r=t.parent().next().find("input:text.check-for-bsdatepicker"),r.length>0)?r.datepicker("show"):void 0})}):void alert("Seems like you do not have Bootstrap datepicker gem (https://github.com/Nerian/bootstrap-datepicker-rails)\ninstalled. Either install it pick another filter with :filter_type.")},k=function(){var e;return $.datepicker||alert("Seems like you do not have jQuery datepicker (http://jqueryui.com/demos/datepicker/)\ninstalled. Either install it pick another filter with :filter_type."),(e=$(".date-filter.wg-jquery-datepicker input[type=hidden]").data("locale"))&&$.datepicker.setDefaults($.datepicker.regional[e]),$(".date-filter.wg-jquery-datepicker .date-label").each(function(e,t){var r,n,i,c,o,u,d,l;return i=$("#"+$(t).data("dom-id")),c=i.data("close-calendar-event-name"),$(t).click(function(e){return $(this).html(""),i.val(""),c&&i.trigger(c),e.preventDefault(),!1}),d=this,r=i.data("date-format"),l=i.data("date-year-range"),o=i.data("button-text"),i.datepicker({firstDay:1,dateFormat:r,changeMonth:!0,changeYear:!0,yearRange:l,onSelect:function(e,t){var n;return n=$(this).datepicker("getDate"),a("the-other-datepicker-id-to",i,n,r,function(e,t){return t>e}),a("the-other-datepicker-id-from",i,n,r,function(e,t){return e>t}),$(d).html(e),c?i.trigger(c):void 0}}),n=i.parent(),$(t).before(' <i class="fa fa-calendar ui-datepicker-trigger" title="'+o+'" ></i> '),u=$(".fa-calendar",n),u.click(function(){return i.datepicker("show")})})},h=function(e){var t,r,n;return r=".wg-hide-filter",n=".wg-show-filter",t=".wg-filter-row",$(r,e).click(function(){return $(this).hide(),$(n,e).show(),$(t,e).hide()}),$(n,e).click(function(){return $(this).hide(),$(r,e).show(),$(t,e).show()})},l=function(e,t){return $(".export-to-csv-button",e).click(function(){return t.exportToCsv()})},w=function(e,t){return $(".submit",e).click(function(){return t.process()}),$(".reset",e).click(function(){return t.reset()}),$(".wg-filter-row input[type=text], .wg-filter-row input:text[data-provide=datepicker]",e).keydown(function(e){return 13===e.keyCode?(e.preventDefault(),t.process()):void 0})},e=function(e){var t,r;return r=$("#"+e),(t=r[0])?(t.value=t.value,t.focus()):void 0},o=function(e,t){return $("select.auto-reload, input.native-datepicker.auto-reload",e).change(function(){return t.process()}),$("input.auto-reload",e).keyup(function(e){return i(e.which)?t.setProcessTimer(this.id):void 0}),$("input.negation-checkbox.auto-reload",e).click(function(){return t.process()}),$(document).bind("wg:calendarChanged_"+t.name,function(){return t.process()})},i=function(e,t){return-1===[37,38,39,40,9,27].indexOf(e)},c=function(){return $(".wg-detached-filter").each(function(e,r){var n;return n=t(r),n?($("select.auto-reload, input.native-datepicker.auto-reload",r).change(function(){return n.process()}),$("input.auto-reload",r).keyup(function(e){return i(e.which)?n.setProcessTimer(this.id):void 0}),$("input.negation-checkbox.auto-reload",r).click(function(){return n.process()})):void 0})},v=function(e,t){return $(".wg-show-all-link, .wg-back-to-pagination-link",e).click(function(e){var r,n,i;return e.preventDefault(),n=$(this).data("grid-state"),r=$(this).data("confim-message"),i=function(){return t.reloadPageForGivenGridState(n)},r?confirm(r)?i():void 0:i()})},g=function(e){return $(".expand-multi-select-icon",e).click(function(){return $(this).prev().each(function(e,t){return t.multiple=!0}),$(this).next().show(),$(this).hide()}),$(".collapse-multi-select-icon",e).click(function(){return $(this).prev().prev().each(function(e,t){return t.multiple=!1}),$(this).prev().show(),$(this).hide()})},d=function(e){return $(".select-all",e).click(function(){return $(".sel input",e).prop("checked",!0).trigger("change")}),$(".deselect-all",e).click(function(){return $(".sel input",e).prop("checked",!1).trigger("change")}),$(".wg-select-all",e).click(function(){return $(".sel input",e).prop("checked",$(this).prop("checked")).trigger("change")})},t=function(e){var t;return t=$(e).data("grid-name"),t&&window[r]?window[r][t]:null},p=function(){return $(".wg-external-csv-export-button").each(function(e,r){var n;return n=t(r),n?$(r).click(function(e){return n.exportToCsv()}):void 0})},f=function(){return $(".wg-external-submit-button").each(function(e,r){var n;return n=t(r),n?$(r).click(function(e){return n.process(),e.preventDefault(),!1}):void 0}),$(".wg-external-reset-button").each(function(e,r){var n;return n=t(r),n?$(r).click(function(e){return n.reset(),e.preventDefault(),!1}):void 0}),$(".wg-detached-filter").each(function(e,r){var n;return n=t(r),n?$("input[type=text], input:text[data-provide=datepicker]",this).keydown(function(e){return 13===e.keyCode?(n.process(),e.preventDefault(),!1):void 0}):void 0})},window.getGridProcessorForElement=t,window.initWiceGrid=n}).call(this);