(function(){var e,t,r,n,i;$(document).on("page:load ready",function(){return i()}),i=function(){return $(".wice-grid-save-query-field").keydown(function(e){return 13===e.keyCode?n($(this).next(),e):void 0}),$(".wice-grid-save-query-button").click(function(e){return n(this,e)}),$(".wice-grid-delete-query").click(function(t){return e(this,t)}),$(".wice-grid-query-load-link").click(function(e){return t(this,e)})},t=function(e,t){var r,n,i;return(r=window.getGridProcessorForElement(e))&&(n=$(e).data("query-id"),i=r.appendToUrl(r.buildUrlWithParams(),r.parameterNameForQueryLoading+encodeURIComponent(n)),r.visit(i)),t.preventDefault(),t.stopPropagation(),!1},e=function(e,t){var n,i,a;return n=$(e).data("wg-confirm"),a=n?function(){return confirm(n)}:function(){return!0},a()&&(i=window.getGridProcessorForElement(e))&&jQuery.ajax({url:$(e).attr("href"),async:!0,dataType:"json",success:function(e,t,n){return r(e,i.name)},type:"POST"}),t.preventDefault(),t.stopPropagation(),!1},n=function(e,t){var n,i,a,o,u,c,s,d;return(a=window.getGridProcessorForElement(e))?(n=$(e),i=n.data("base-path-to-query-controller"),o=n.data("parameters"),c=n.data("ids"),u=n.prev(),c instanceof Array&&c.each(function(e){return o.push(["extra["+e+"]",$("#"+e).val()])}),s=u.val(),d=a.gridStateToRequest(o),jQuery.ajax({url:i,async:!0,data:d+"&query_name="+encodeURIComponent(s),dataType:"json",success:function(e,t,n){return r(e,a.name,s,u)},type:"POST"}),t.preventDefault(),!1):void 0},r=function(r,n,i,a){var o,u,c,s,d;return s="#"+n+"_notification_messages",u="#"+n+"_title",d="#"+n+"_query_list",i&&a.val(""),(o=r.error_messages)?$(s).text(o):((c=r.notification_messages)&&$(s).text(c),i&&$(u).html("<h3>"+i+"</h3>"),$(d).replaceWith(r.query_list),jQuery.ui&&$(d).effect("highlight"),$(".wice-grid-delete-query",$(d)).click(function(t){return e(this,t)}),$(".wice-grid-query-load-link",$(d)).click(function(e){return t(this,e)}))}}).call(this);