(function(){this.Main=function(){function e(){}return e.prototype.form_submit_result=function(e){return $(e).on("ajax:success",function(e,r,t,n){var a,o;return a=document.getElementById("interior_iframe"),a&&(a.src=a.src),o="<div class='alert alert-info custom-alert-margin'>\n  "+r.name+"\n</div>",$("div.result-notice").fadeIn().html(o),window.setTimeout(function(){$("div.result-notice").fadeOut().html("")},3e3)}).on("ajax:error",function(r,t,n,a){return $(e).render_form_errors("admin",t.responseJSON)})},e.prototype.read_url=function(e,r){var t,n;return e.files&&e.files[0]?(t=$(e).val().split(".").pop().toLowerCase(),-1===$.inArray(t,["gif","png","jpg","jpeg"])?(alert("invalid extension!"),!1):(n=new FileReader,n.onload=function(e){return $("div."+r+" img").attr("src",e.target.result)},n.readAsDataURL(e.files[0]))):void 0},e.prototype.remove_image_tour=function(e,r,t,n){return $.ajax(e,{type:"POST",dataType:"JSON",data:{tour_id:t,type:r},asnyc:!1,success:function(e){return n.parent().find("img").attr("src",e.default_image_src).attr("alt","Image is removed"),n.removeAttr("data-id"),n.parent().removeClass("image-uploaded")}})},e}(),$.fn.render_form_errors=function(e,r){var t;t=this,this.clear_form_errors(),$.each(r,function(r,n){var a,o;return o=r.split("."),o.length>1&&(e=o[0],r=o[1]),a=t.find("input, select, textarea").filter(function(){var t;return t=$(this).attr("name"),t?t.match(new RegExp(e+"\\["+r+"\\(?")):void 0}),a.closest(".form-group").addClass("has-error"),a.parent().append('<span class="help-block">'+$.map(n,function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("<br />")+"</span>")})},$.fn.clear_form_errors=function(){return this.find(".form-group").removeClass("has-error"),this.find("span.help-block").remove()},$.fn.clear_form_fields=function(){return this.find(":input","#myform").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}}).call(this);